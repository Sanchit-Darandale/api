<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DS API Platform - Documentation</title>
  <meta name="description" content="Unified ChatGPT + Gemini Chatbot API with Memory and Custom Prompts - Complete API documentation" />
  <meta name="author" content="Sanchit" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Fira+Code&display=swap" rel="stylesheet">

  <!-- Shared theme -->
  <link rel="stylesheet" href="theme.css">

  <style>
    /* Docs-specific layout styles */
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    code, pre {
      font-family: 'Fira Code', 'Consolas', 'Monaco', monospace;
    }

    /* Animations */
    @keyframes fade-in { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fade-in-up { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes scale-in { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }

    .animate-fade-in { animation: fade-in 0.6s ease-out; }
    .animate-fade-in-up { animation: fade-in-up 0.6s ease-out; }
    .animate-scale-in { animation: scale-in 0.3s ease-out; }

    /* Header */
    header {
      text-align: center;
      padding: 4rem 2rem 2rem;
      max-width: 64rem;
      margin: 0 auto;
    }

    .badge-container {
      display: inline-flex;
      align-items: center;
      padding: 0.5rem 1rem;
      background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--accent)));
      color: hsl(var(--primary-foreground));
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
    }

    h1 {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, hsl(var(--foreground)), hsl(var(--primary)));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 1.25rem;
      color: hsl(var(--muted-foreground));
      max-width: 48rem;
      margin: 0 auto;
    }

    /* Sections */
    section {
      padding: 4rem 1rem 1rem;
      max-width: 64rem;
      margin: 0 auto;
    }

    .section-title {
      font-size: 2rem;
      font-weight: 700;
      text-align: center;
      margin-bottom: 1rem;
    }

    /* Cards */
    .card {
      padding: 2rem;
      border-radius: var(--radius);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    /* Table */
    .table-container {
      overflow-x: auto;
      margin: 1.5rem 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.875rem;
    }

    th, td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid hsl(var(--border));
    }

    th {
      font-weight: 600;
      background-color: hsl(var(--muted));
    }

    .badge-yes {
      background-color: hsl(var(--primary));
      color: hsl(var(--primary-foreground));
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .badge-optional {
      background-color: hsl(var(--muted));
      color: hsl(var(--muted-foreground));
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      font-size: 0.75rem;
      font-weight: 600;
    }

    /* Code Examples */
    .code-card {
      border-radius: 0.75rem;
      overflow: hidden;
      border: 1px solid;
      margin-bottom: 1.5rem;
    }

    body.dark .code-card {
      background: #0f172a;
      border-color: #1e293b;
    }

    body.light .code-card {
      background: white;
      border-color: #e5e7eb;
      box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    }

    .code-header {
      padding: 0.75rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid;
    }

    body.dark .code-header {
      background: rgba(30, 41, 59, 0.5);
      border-color: #334155;
    }

    body.light .code-header {
      background: #f3f4f6;
      border-color: #e5e7eb;
    }

    .code-title {
      font-size: 1rem;
      font-weight: 600;
    }

    body.dark .code-title {
      color: white;
    }

    body.light .code-title {
      color: #111827;
    }

    .btn-copy {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.25rem 0.5rem;
      border-radius: 0.375rem;
      border: none;
      cursor: pointer;
      font-size: 0.75rem;
      transition: all 0.3s;
    }

    body.dark .btn-copy {
      background: #334155;
      color: #cbd5e1;
    }

    body.dark .btn-copy:hover {
      background: #475569;
    }

    body.light .btn-copy {
      background: #e5e7eb;
      color: #374151;
    }

    body.light .btn-copy:hover {
      background: #d1d5db;
    }

    .btn-copy.copied {
      color: #10b981;
    }

    pre {
      padding: 1.5rem;
      overflow-x: auto;
      margin: 0;
    }

    code {
      font-family: 'Courier New', monospace;
      font-size: 0.875rem;
    }

    body.dark code {
      color: #cbd5e1;
    }

    body.light code {
      color: #1f2937;
    }

    /* Form */
    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.8rem;
    }

    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius);
      background-color: hsl(var(--card));
      color: hsl(var(--foreground));
      font-size: 1rem;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .model-buttons {
      display: flex;
      gap: 0.5rem;
    }

    .model-buttons button.active {
      background-color: hsl(var(--primary));
      color: hsl(var(--primary-foreground));
    }

    .btn-lg {
      padding: 0.75rem 1.5rem;
      font-size: 1.125rem;
    }

    .btn-disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 2rem;
      border-top: 1px solid hsl(var(--border));
      color: hsl(var(--muted-foreground));
    }

    /* Toast */
    .toast {
      position: fixed;
      top: 1rem;
      right: 1rem;
      padding: 1rem;
      border-radius: var(--radius);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      z-index: 10000;
      max-width: 20rem;
    }

    .toast.success {
      background-color: hsl(var(--primary));
      color: hsl(var(--primary-foreground));
    }

    .toast.error {
      background-color: hsl(var(--destructive));
      color: hsl(var(--destructive-foreground));
    }

    @keyframes fade-out {
      to { opacity: 0; transform: translateY(-10px); }
    }

    /* Tab Styles */
    .tab-buttons {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1.2rem;
      border-bottom: 1px solid;
    }

    body.dark .tab-buttons {
      border-color: #334155;
    }

    body.light .tab-buttons {
      border-color: #e5e7eb;
    }

    .tab-btn {
      padding: 0.5rem 1rem;
      border: none;
      background: none;
      cursor: pointer;
      font-size: 0.875rem;
      font-weight: 500;
      border-radius: 0.375rem 0.375rem 0 0;
      transition: all 0.2s;
    }

    body.dark .tab-btn {
      color: #cbd5e1;
    }

    body.dark .tab-btn:hover {
      background: rgba(30, 41, 59, 0.5);
    }

    body.dark .tab-btn.active {
      background: #334155;
      color: white;
    }

    body.light .tab-btn {
      color: #374151;
    }

    body.light .tab-btn:hover {
      background: #f3f4f6;
    }

    body.light .tab-btn.active {
      background: #e5e7eb;
      color: #111827;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Theme Toggle Button */
    .theme-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      width: 3rem;
      height: 3rem;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: hsl(var(--card));
      color: hsl(var(--foreground));
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      transition: all 0.3s;
      z-index: 1000;
    }

    .theme-toggle:hover {
      transform: scale(1.05);
    }

    body.dark .theme-toggle {
      background-color: #334155;
      color: #cbd5e1;
    }

    body.light .theme-toggle {
      background-color: white;
      color: #374151;
      box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .grid-2 {
        grid-template-columns: 1fr;
      }

      h1 {
        font-size: 2.5rem;
      }

      .section-title {
        font-size: 1.75rem;
      }

      .tab-buttons {
        flex-wrap: wrap;
      }

      .tab-btn {
        flex: 1;
        min-width: 0;
      }

      .theme-toggle {
        width: 2.5rem;
        height: 2.5rem;
      }
    }
  </style>
</head>
<body>
  <!-- Loading Screen (shared) -->
  <div id="loading-screen">
    <div class="loader-container">
      <div class="loader-logo">
        <div class="loader-ring"></div>
        <div class="loader-circle">
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
          </svg>
        </div>
      </div>
      <h2 class="loader-text">DS API Platform</h2>
      <p class="loader-subtext">Loading Documentation...</p>
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
      <p class="progress-percent" id="progress-percent">0%</p>
    </div>
  </div>

  <!-- Theme Toggle -->
  <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
    <svg id="sunIcon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
      <circle cx="12" cy="12" r="4"/>
      <path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
    </svg>
    <svg id="moonIcon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
    </svg>
  </button>

  <!-- Header -->
  <header class="animate-fade-in">
    <div class="badge-container animate-scale-in">
      <span class="badge-text">API Documentation</span>
    </div>
    <h1 class="animate-fade-in-up">DS API Platform</h1>
    <p class="subtitle animate-fade-in-up">Unified ChatGPT + Gemini Chatbot API with Memory and Custom Prompts</p>
  </header>

  <!-- Overview -->
  <section class="animate-fade-in">
    <h2 class="section-title">Overview</h2>
    <p style="text-align: center; font-size: 1.125rem; line-height: 1.75; color: hsl(var(--foreground) / 0.9); max-width: 48rem; margin: 0 auto;">
      This API provides access to an intelligent chatbot engine built using 
      <span style="color: hsl(var(--primary)); font-weight: 600;">OpenAI GPT</span> and
      <span style="color: hsl(var(--primary)); font-weight: 600;">Google Gemini</span> models.
      Users can query either model with custom system prompts, and user history
      is stored in MongoDB for persistent contextual memory.
    </p>
  </section>

  <!-- Endpoint -->
      <section>
        <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem;"><strong>⚡ Endpoint</strong></h2>
        <div class="card">
          <div style="margin-bottom: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem;">
              <span class="badge badge-get">GET</span>
              <code style="color: #38bdf8; font-size: 1.125rem;">/ai</code>
            </div>
            <div style="display: flex; align-items: center; gap: 0.75rem;">
              <span class="badge badge-post">POST</span>
              <code style="color: #38bdf8; font-size: 1.125rem;">/ai</code>
            </div>
          </div>
          <p style="margin-bottom: 1rem; opacity: 0.8;">
            Both methods are supported. Use <strong>GET</strong> for quick browser-based testing and <strong>POST</strong> for API integration.
          </p>

          <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem;">Parameters</h3>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Parameter</th>
                  <th>Type</th>
                  <th>Required</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code style="color: #38bdf8;">query</code></td>
                  <td>string</td>
                  <td><span class="badge-yes">Yes</span></td>
                  <td>User input or question for the chatbot.</td>
                </tr>
                <tr>
                  <td><code style="color: #38bdf8;">id</code></td>
                  <td>string</td>
                  <td><span class="badge-yes">Yes</span></td>
                  <td>Unique user ID to store chat history in MongoDB.</td>
                </tr>
                <tr>
                  <td><code style="color: #38bdf8;">model</code></td>
                  <td>string</td>
                  <td><span class="badge-yes">Yes</span></td>
                  <td>Choose <code style="color: #38bdf8; padding: 0.125rem 0.5rem; background: rgba(56, 189, 248, 0.1); border-radius: 0.25rem;">gpt</code> or <code style="color: #fbbf24; padding: 0.125rem 0.5rem; background: rgba(251, 191, 36, 0.1); border-radius: 0.25rem;">gemini</code>.</td>
                </tr>
                <tr>
                  <td><code style="color: #38bdf8;">system_prompt</code></td>
                  <td>string</td>
                  <td><span class="badge-optional">Optional</span></td>
                  <td>Custom system prompt for AI behavior. If omitted, the default prompt is used.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>
      
  <!-- Request Examples -->
      <section>
        <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem;"><strong>⚡ Request Examples</strong></h2>
        <div class="code-card">
          <div class="code-header">
            <h3 class="code-title">GET Request</h3>
            <button class="btn-copy" data-code-index="0">
              <svg class="icon copy-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
              <span class="copy-text">Copy</span>
            </button>
          </div>
          <pre><code>GET https://ds-chatbot-api-platform.onrender.com/ai?query=Hello&model=gpt&id=user123</code></pre>
        </div>

        <div class="code-card">
          <div class="code-header">
            <h3 class="code-title">POST Request</h3>
            <button class="btn-copy" data-code-index="1">
              <svg class="icon copy-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
              <span class="copy-text">Copy</span>
            </button>
          </div>
          <pre><code>POST https://ds-chatbot-api-platform.onrender.com/ai
Content-Type: application/json

{
  "query": "Explain neural networks in simple terms.",
  "model": "gemini",
  "id": "user456",
  "system_prompt": "Answer in a concise technical format."
}</code></pre>
        </div>

        <div class="code-card">
          <div class="code-header">
            <h3 class="code-title">Response Format</h3>
            <button class="btn-copy" data-code-index="3">
              <svg class="icon copy-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
              <span class="copy-text">Copy</span>
            </button>
          </div>
          <pre><code>{
  "response": "A neural network is a model inspired by the human brain...",
  "Developer": "Sanchit"
}</code></pre>
        </div>
      </section>

      <!-- Code Integration Examples -->
      <section>
        <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem;"><strong>⚡ Endpoint</strong></h2>
        <div class="code-card">
          <div class="code-header">
            <h3 class="code-title">Code Integration Examples</h3>
            <button class="btn-copy" data-code-index="2">
              <svg class="icon copy-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
              <span class="copy-text">Copy</span>
            </button>
          </div>
          <div class="tab-buttons">
            <button class="tab-btn active" onclick="showTab('python')">Python</button>
            <button class="tab-btn" onclick="showTab('javascript')">JavaScript</button>
            <button class="tab-btn" onclick="showTab('java')">Java</button>
            <button class="tab-btn" onclick="showTab('cpp')">C++</button>
          </div>

          <div id="python-tab" class="tab-content active">
            <h3>Python</h3>
            <pre><code>import requests

def chat_with_ai(query, user_id, model='gpt', system_prompt=None):
    url = 'https://ds-chatbot-api-platform.onrender.com/ai'
    data = {
        'query': query,
        'model': model,
        'id': user_id
    }
    if system_prompt:
        data['system_prompt'] = system_prompt

    response = requests.post(url, json=data)
    return response.json()

# Usage
result = chat_with_ai("What is machine learning?", "user789")
print(result['response'])</code></pre>
          </div>

          <div id="javascript-tab" class="tab-content">
            <h3>JavaScript</h3>
            <pre><code>async function sendMessageToAI(message, userId, model = 'gpt') {
    const url = 'https://ds-chatbot-api-platform.onrender.com/ai';
    const data = {
        query: message,
        model: model,
        id: userId
    };

    try {
        const response = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        });
        const result = await response.json();
        return result.response;
    } catch (error) {
        console.error('Error:', error);
        return 'Sorry, there was an error processing your request.';
    }
}

// Usage with localStorage user ID
let userId = localStorage.getItem('chatbot_user_id');
if (!userId) {
    userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    localStorage.setItem('chatbot_user_id', userId);
}

sendMessageToAI("Hello!", userId).then(response => {
    console.log('AI Response:', response);
});</code></pre>
          </div>

          <div id="java-tab" class="tab-content">
            <h3>Java</h3>
            <pre><code>import java.io.IOException;
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.net.http.HttpRequest.BodyPublishers;
import java.net.http.HttpResponse.BodyHandlers;

public class ChatbotClient {
    private static final String API_URL = "https://ds-chatbot-api-platform.onrender.com/ai";

    public static String sendMessage(String query, String userId, String model) throws IOException, InterruptedException {
        String json = String.format("""
            {
                "query": "%s",
                "model": "%s",
                "id": "%s"
            }
            """, query, model, userId);

        HttpClient client = HttpClient.newHttpClient();
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(API_URL))
            .header("Content-Type", "application/json")
            .POST(BodyPublishers.ofString(json))
            .build();

        HttpResponse<String> response = client.send(request, BodyHandlers.ofString());
        return response.body();
    }

    public static void main(String[] args) {
        try {
            String response = sendMessage("What is machine learning?", "user789", "gpt");
            System.out.println(response);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}</code></pre>
          </div>

          <div id="cpp-tab" class="tab-content">
            <h3>C++</h3>
            <pre><code>#include <iostream>
#include <curl/curl.h>
#include <string>

size_t WriteCallback(void* contents, size_t size, size_t nmemb, void* userp) {
    ((std::string*)userp)->append((char*)contents, size * nmemb);
    return size * nmemb;
}

std::string sendChatMessage(const std::string& query, const std::string& userId, const std::string& model) {
    CURL* curl;
    CURLcode res;
    std::string readBuffer;

    curl = curl_easy_init();
    if(curl) {
        std::string jsonData = "{\"query\":\"" + query + "\",\"model\":\"" + model + "\",\"id\":\"" + userId + "\"}";

        curl_easy_setopt(curl, CURLOPT_URL, "https://ds-chatbot-api-platform.onrender.com/ai");
        curl_easy_setopt(curl, CURLOPT_POSTFIELDS, jsonData.c_str());
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WriteCallback);
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, &readBuffer);

        struct curl_slist *headers = NULL;
        headers = curl_slist_append(headers, "Content-Type: application/json");
        curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);

        res = curl_easy_perform(curl);
        if(res != CURLE_OK) {
            std::cerr << "curl_easy_perform() failed: " << curl_easy_strerror(res) << std::endl;
        }

        curl_slist_free_all(headers);
        curl_easy_cleanup(curl);
    }
    return readBuffer;
}

int main() {
    std::string response = sendChatMessage("What is machine learning?", "user789", "gpt");
    std::cout << response << std::endl;
    return 0;
}</code></pre>
          </div>
        </div>
      </section>

      <!-- User ID Management -->
      <section>
        <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem;"><strong>⚡ User ID Management</strong></h2>
        <p style="text-align: left; font-size: 1.125rem; line-height: 1.75; color: hsl(var(--foreground) / 0.9); max-width: 48rem; margin: 0 0 2rem 0">
          User IDs enable persistent chat memory. Each unique ID maintains separate conversation history in MongoDB.
        </p>

        <div class="code-card">
          <div class="code-header">
            <h3 class="code-title">1. Storing User ID in localStorage</h3>
            <button class="btn-copy" data-code-index="4">
              <svg class="icon copy-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
              <span class="copy-text">Copy</span>
            </button>
          </div>
          <pre><code>// Generate and store user ID
let userId = localStorage.getItem('chatbot_user_id');
if (!userId) {
    userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    localStorage.setItem('chatbot_user_id', userId);
    console.log('New user ID generated:', userId);
} else {
    console.log('Existing user ID retrieved:', userId);
}

// Use the userId in your API calls
console.log('Ready to use userId:', userId);</code></pre>
        </div>

        <div class="code-card">
          <div class="code-header">
            <h3 class="code-title">2. Storing User ID in Session Storage (temporary)</h3>
            <button class="btn-copy" data-code-index="5">
              <svg class="icon copy-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
              <span class="copy-text">Copy</span>
            </button>
          </div>
          <pre><code>// Session storage - clears when tab closes
let userId = sessionStorage.getItem('chatbot_user_id');
if (!userId) {
    userId = 'session_' + Date.now();
    sessionStorage.setItem('chatbot_user_id', userId);
}</code></pre>
        </div>

        <div class="code-card">
          <div class="code-header">
            <h3 class="code-title">3. Storing User ID in Cookies (cross-domain)</h3>
            <button class="btn-copy" data-code-index="6">
              <svg class="icon copy-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
              <span class="copy-text">Copy</span>
            </button>
          </div>
          <pre><code>// Set cookie that expires in 30 days
function setUserIdCookie(userId) {
    const expires = new Date();
    expires.setTime(expires.getTime() + (30 * 24 * 60 * 60 * 1000)); // 30 days
    document.cookie = `chatbot_user_id=${userId};expires=${expires.toUTCString()};path=/`;
}

// Get cookie
function getUserIdCookie() {
    const name = 'chatbot_user_id=';
    const decodedCookie = decodeURIComponent(document.cookie);
    const cookies = decodedCookie.split(';');
    for (let cookie of cookies) {
        cookie = cookie.trim();
        if (cookie.indexOf(name) === 0) {
            return cookie.substring(name.length);
        }
    }
    return null;
}</code></pre>
        </div>

        <div style="margin-top: 2rem;">
          <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem;"><strong>⚡ For Detailed Example of API Integration in Chatbot using HTML: <a href="https://github.com/Sanchit-Darandale/DS-CHATBOT-API-PLATFROM-GUIDE/blob/main/README.md">Click Here</a></strong></h3>
        </div>
      </section>

  <section class="bg-secondary animate-fade-in">
    <div style="text-align: center; margin-bottom: 1rem;">
      <h2 class="section-title">Try Playground</h2>
      <p style="color: hsl(var(--muted-foreground)); font-size: 1.125rem;">Test the API directly from your browser</p>
    </div>

    <div class="card" style="max-width: 64rem; margin: 0 auto;">
      <form id="playgroundForm">
        <div class="form-group">
          <label>Query *</label>
          <textarea id="query" placeholder="Enter your question..." required></textarea>
        </div>

        <div class="grid-2">
          <div class="form-group">
            <label>User ID *</label>
            <input type="text" id="userId" placeholder="e.g., user123" required />
          </div>

          <div class="form-group">
            <label>Model *</label>
            <div class="model-buttons">
              <button type="button" class="btn-outline active" id="gptBtn" style="flex: 1;">GPT</button>
              <button type="button" class="btn-outline" id="geminiBtn" style="flex: 1;">Gemini</button>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>System Prompt (Optional)</label>
          <textarea id="systemPrompt" placeholder="Custom system prompt..." style="min-height: 80px;"></textarea>
        </div>

        <button type="submit" class="btn-primary btn-lg" id="testBtn">
          <svg style="width: 1.25rem; height: 1.25rem; display: inline-block; vertical-align: middle; margin-right: 0.5rem;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Test API
        </button>

        <div id="responseContainer" style="display: none; margin-top: 1.5rem;">
          <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.75rem;">Response:</h3>
          <div class="code-block">
            <pre id="responseContent"></pre>
          </div>
        </div>
      </form>
    </div>
  </section>

  <!-- Developer Info -->
  <section class="animate-fade-in" style="border-top: 1px solid hsl(var(--border));">
    <h2 class="section-title">Developer Information</h2>
    <div style="text-align: center;">
      <p style="font-size: 1.125rem; margin-bottom: 0.5rem;">
        <span style="font-weight: bold;">Developer:</span> Sanchit
      </p>
      <p style="color: hsl(var(--muted-foreground));">B.E. in Artificial Intelligence & Data Science Engineering</p>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <p>© 2025 DS API Platform - All rights reserved.</p>
  </footer>

  <!-- Shared theme & behavior script -->
  <script src="theme.js"></script>

  <!-- Playground / API script remains (leave form handling code as-is) -->
  <script>
    // Loading animation
    let progress = 0;
    const progressFill = document.getElementById('progress-fill');
    const progressPercent = document.getElementById('progress-percent');
    const loadingScreen = document.getElementById('loading-screen');
    const mainContent = document.getElementById('main-content');

    const progressInterval = setInterval(() => {
      progress += 2;
      if (progressFill) progressFill.style.width = progress + '%';
      if (progressPercent) progressPercent.textContent = progress + '%';

      if (progress >= 100) {
        clearInterval(progressInterval);
        setTimeout(() => {
          if (loadingScreen) loadingScreen.classList.add('hidden');
          if (mainContent) {
            mainContent.style.display = 'block';
            mainContent.classList.add('fade-in');
          }
        }, 300);
      }
    }, 20);

    // Theme Toggle (single, fixed implementation)
    const themeToggle = document.getElementById('themeToggle');
    const sunIcon = document.getElementById('sunIcon');
    const moonIcon = document.getElementById('moonIcon');
    const html = document.documentElement;

    const savedTheme = localStorage.getItem('theme') || 'light';
    if (savedTheme === 'dark') {
      html.classList.add('dark');
      if (sunIcon) sunIcon.style.display = 'block';
      if (moonIcon) moonIcon.style.display = 'none';
    } else {
      if (sunIcon) sunIcon.style.display = 'none';
      if (moonIcon) moonIcon.style.display = 'block';
    }

    if (themeToggle) {
      themeToggle.addEventListener('click', () => {
        html.classList.toggle('dark');
        const isDark = html.classList.contains('dark');

        // Animate icon transition
        if (isDark) {
          if (moonIcon) moonIcon.style.transform = 'rotate(180deg) scale(0)';
          setTimeout(() => {
            if (moonIcon) moonIcon.style.display = 'none';
            if (sunIcon) {
              sunIcon.style.display = 'block';
              sunIcon.style.transform = 'rotate(0deg) scale(1)';
            }
          }, 150);
        } else {
          if (sunIcon) sunIcon.style.transform = 'rotate(180deg) scale(0)';
          setTimeout(() => {
            if (sunIcon) sunIcon.style.display = 'none';
            if (moonIcon) {
              moonIcon.style.display = 'block';
              moonIcon.style.transform = 'rotate(0deg) scale(1)';
            }
          }, 150);
        }

        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      });
    }

    // Model Selection
    const gptBtn = document.getElementById('gptBtn');
    const geminiBtn = document.getElementById('geminiBtn');
    let selectedModel = 'gpt';

    if (gptBtn) {
      gptBtn.addEventListener('click', () => {
        selectedModel = 'gpt';
        gptBtn.classList.add('active');
        if (geminiBtn) geminiBtn.classList.remove('active');
      });
    }
    if (geminiBtn) {
      geminiBtn.addEventListener('click', () => {
        selectedModel = 'gemini';
        geminiBtn.classList.add('active');
        if (gptBtn) gptBtn.classList.remove('active');
      });
    }

    // Tab Switching for Code Examples
    function showTab(lang) {
      const tabButtons = document.querySelectorAll('.tab-btn');
      const tabContents = document.querySelectorAll('.tab-content');

      // Remove active class from all buttons
      tabButtons.forEach(btn => btn.classList.remove('active'));
      // Add active class to clicked button
      event.target.classList.add('active');

      // Hide all tab contents
      tabContents.forEach(content => content.classList.remove('active'));

      // Show the corresponding tab content
      const activeTab = document.getElementById(`${lang}-tab`);
      if (activeTab) {
        activeTab.classList.add('active');
      }
    }

    // Toast Function
    function showToast(title, description, type = 'success') {
      const toast = document.createElement('div');
      toast.className = `toast ${type} animate-fade-in-up`;
      toast.innerHTML = `
        <div style="font-weight: 600; margin-bottom: 0.25rem;">${title}</div>
        <div style="font-size: 0.875rem; color: hsl(var(--muted-foreground));">${description}</div>
      `;
      document.body.appendChild(toast);

      setTimeout(() => {
        toast.style.animation = 'fade-out 0.3s ease-out';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    // Copy to Clipboard Functionality
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('btn-copy') || e.target.closest('.btn-copy')) {
        const button = e.target.closest('.btn-copy');
        const codeCard = button.closest('.code-card');
        const activeTab = codeCard.querySelector('.tab-content.active');
        let preElement;
        if (activeTab) {
          preElement = activeTab.querySelector('pre');
        } else {
          preElement = codeCard.querySelector('pre');
        }
        if (preElement) {
          const textToCopy = preElement.textContent;
          navigator.clipboard.writeText(textToCopy).then(() => {
            const copyText = button.querySelector('.copy-text');
            if (copyText) {
              copyText.textContent = 'Copied!';
              button.disabled = true;
              setTimeout(() => {
                copyText.textContent = 'Copy';
                button.disabled = false;
              }, 2000);
            }
            showToast('Copied!', 'Code copied to clipboard', 'success');
          }).catch(() => {
            showToast('Error', 'Failed to copy code', 'error');
          });
        }
      }
    });

    // Playground Form
    const form = document.getElementById('playgroundForm');
    const testBtn = document.getElementById('testBtn');
    const responseContainer = document.getElementById('responseContainer');
    const responseContent = document.getElementById('responseContent');

    if (form) {
      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const query = document.getElementById('query').value.trim();
        const userId = document.getElementById('userId').value.trim();
        const systemPrompt = document.getElementById('systemPrompt').value.trim();

        if (!query || !userId) {
          showToast('Missing Fields', 'Please provide both query and user ID', 'error');
          return;
        }

        if (testBtn) {
          testBtn.disabled = true;
          testBtn.classList.add('btn-disabled');
          testBtn.innerHTML = `
            <svg class="animate-spin" style="width: 1.25rem; height: 1.25rem; display: inline-block; vertical-align: middle; margin-right: 0.5rem;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle style="opacity: 0.25;" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path style="opacity: 0.75;" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            Testing...
          `;
        }
        if (responseContainer) responseContainer.style.display = 'none';

        try {
          const params = new URLSearchParams({
            query,
            id: userId,
            model: selectedModel,
            ...(systemPrompt && { system_prompt: systemPrompt }),
          });

          const res = await fetch(
            `https://ds-chatbot-api-platform.onrender.com/ai?${params.toString()}`
          );

          const data = await res.json();
          if (responseContent) responseContent.textContent = JSON.stringify(data, null, 2);
          if (responseContainer) {
            responseContainer.style.display = 'block';
            responseContainer.classList.add('animate-fade-in-up');
          }

          showToast('Success!', 'API response received', 'success');
        } catch (error) {
          if (responseContent) responseContent.textContent = JSON.stringify({ error: 'Failed to fetch response' }, null, 2);
          if (responseContainer) responseContainer.style.display = 'block';
          showToast('Error', 'Failed to fetch API response', 'error');
        } finally {
          if (testBtn) {
            testBtn.disabled = false;
            testBtn.classList.remove('btn-disabled');
            testBtn.innerHTML = `
              <svg style="width: 1.25rem; height: 1.25rem; display: inline-block; vertical-align: middle; margin-right: 0.5rem;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              Test API
            `;
          }
        }
      });
    }
  </script>
</body>
</html>
